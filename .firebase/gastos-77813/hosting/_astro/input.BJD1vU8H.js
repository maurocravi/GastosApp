import{ai as b,ah as S,o as y,aj as k,ak as A,K as o,al as E,am as M,an as q,ao as L,u as g,ap as I,Z as f,aq as N}from"./template.CsvUa5oO.js";import{l as m,a as T}from"./render.D2y0TSMt.js";function h(e,a,u=!1){if(e.multiple){if(a==null)return;if(!y(a))return k();for(var l of e.options)l.selected=a.includes(t(l));return}for(l of e.options){var r=t(l);if(A(r,a)){l.selected=!0;return}}(!u||a!==void 0)&&(e.selectedIndex=-1)}function w(e){var a=new MutationObserver(()=>{h(e,e.__value)});a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),S(()=>{a.disconnect()})}function R(e,a,u=a){var l=!0;m(e,"change",r=>{var s=r?"[selected]":":checked",n;if(e.multiple)n=[].map.call(e.querySelectorAll(s),t);else{var v=e.querySelector(s)??e.querySelector("option:not([disabled])");n=v&&t(v)}u(n)}),b(()=>{var r=a();if(h(e,r,l),l&&r===void 0){var s=e.querySelector(":checked");s!==null&&(r=t(s),u(r))}e.__value=r,l=!1}),w(e)}function t(e){return"__value"in e?e.__value:e.value}const O=Symbol("is custom element"),x=Symbol("is html");function U(e){if(o){var a=!1,u=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var l=e.value;c(e,"value",null),e.value=l}if(e.hasAttribute("checked")){var r=e.checked;c(e,"checked",null),e.checked=r}}};e.__on_r=u,E(u),T()}}function c(e,a,u,l){var r=C(e);o&&(r[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||r[a]!==(r[a]=u)&&(a==="loading"&&(e[M]=u),e.removeAttribute(a))}function C(e){return e.__attributes??={[O]:e.nodeName.includes("-"),[x]:e.namespaceURI===q}}function V(e,a,u=a){var l=L(),r=new WeakSet;m(e,"input",s=>{var n=s?e.defaultValue:e.value;if(n=i(e)?_(n):n,u(n),f!==null&&r.add(f),l&&n!==(n=a())){var v=e.selectionStart,d=e.selectionEnd;e.value=n??"",d!==null&&(e.selectionStart=v,e.selectionEnd=Math.min(d,e.value.length))}}),(o&&e.defaultValue!==e.value||g(a)==null&&e.value)&&(u(i(e)?_(e.value):e.value),f!==null&&r.add(f)),I(()=>{var s=a();if(e===document.activeElement){var n=N??f;if(r.has(n))return}i(e)&&s===_(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function i(e){var a=e.type;return a==="number"||a==="range"}function _(e){return e===""?null:+e}export{R as a,V as b,U as r};
