import{i as It,a as $,s as oe,b as Tt}from"./store.CUww-eZX.js";import{j as U,k as C,a as l,p as Rt,b as Yt,f as h,c as e,s,r as t,t as q,l as se,e as ne,d as n,m as T,g as a,u as i,i as ie}from"./template.CsvUa5oO.js";import{s as x,e as g}from"./render.D2y0TSMt.js";import{s as le,e as $t,i as de}from"./event-modifiers.DGqNQqsZ.js";import{r as yt,b as _t,a as ce}from"./input.BJD1vU8H.js";import{c as ue,b as wt,p as ge,d as qt,n as Bt}from"./expenseStore.B72t6hGa.js";import{b as pe,e as Ht,d as Lt,u as ve}from"./firebase.C6L9Uwjb.js";import{t as fe,f as me,s as nt}from"./Notification.Bpng7xep.js";import{p as Nt,b as be}from"./props.BKxzdaK1.js";var xe=h('<div class="fixed inset-0 bg-gray-100/90 overflow-y-auto h-full w-full z-50 flex items-center justify-center"><div class="relative mx-auto p-6 border w-full max-w-md shadow-lg rounded-md bg-white"><div class="mt-3 text-center"><h3 class="text-xl leading-6 font-medium text-gray-900">Confirmación</h3> <div class="mt-4 mb-6"><p class="text-base text-gray-600"> </p></div> <div class="flex justify-center space-x-4"><button class="px-6 py-2 bg-gray-200 text-gray-800 font-semibold rounded-lg shadow-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400 transition-all duration-200">Cancelar</button> <button class="px-6 py-2 bg-red-600 text-white font-semibold rounded-lg shadow-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 transition-all duration-200">Eliminar</button></div></div></div></div>');function he(it,z){Yt(z,!1);let V=Nt(z,"isOpen",8,!1),lt=Nt(z,"message",8,"¿Estás seguro?");const d=ue();function r(){d("confirm")}function v(){d("cancel")}It();var y=U(),M=C(y);{var O=b=>{var f=xe(),m=e(f),W=e(m),B=s(e(W),2),X=e(B),dt=e(X,!0);t(X),t(B);var Z=s(B,2),tt=e(Z),ct=s(tt,2);t(Z),t(W),t(m),t(f),q(()=>x(dt,lt())),g("click",tt,v),g("click",ct,r),fe(3,m,()=>me,()=>({y:-50,duration:300})),g("click",m,le(function(ut){be.call(this,z,ut)})),g("click",f,v),l(b,f)};$(M,b=>{V()&&b(O)})}l(it,y),Rt()}var ye=h('<p class="px-6 py-10 text-center text-gray-500">Cargando gastos...</p>'),_e=h('<p class="px-6 py-10 text-center text-red-500"> </p>'),we=h("<option> </option>"),ke=h('<tr class="bg-blue-50 border-b"><td class="px-6 py-4"><input type="text" class="w-full bg-white border border-gray-300 rounded-md shadow-sm py-1 px-2 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-sm"/></td><td class="px-6 py-4"><select class="w-full bg-white border border-gray-300 rounded-md shadow-sm py-1 px-2 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-sm"></select></td><td class="px-6 py-4"><input type="number" class="w-full bg-white border border-gray-300 rounded-md shadow-sm py-1 px-2 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-sm"/></td><td class="px-6 py-4"><input type="date" class="w-full bg-white border border-gray-300 rounded-md shadow-sm py-1 px-2 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-sm"/></td><td class="px-6 py-4 text-right"><button class="font-medium text-green-600 hover:text-green-800 mr-4 transition-all duration-300 ease-in-out cursor-pointer">Guardar</button> <button class="font-medium text-gray-600 hover:text-gray-800 transition-all duration-300 ease-in-out cursor-pointer">Cancelar</button></td></tr>'),Ee=h('<tr class="bg-white border-b border-gray-100 hover:bg-gray-50"><td class="px-6 py-4 font-medium text-gray-900"> </td><td class="px-6 py-4 text-gray-500"> </td><td class="px-6 py-4 text-gray-500"> </td><td class="px-6 py-4 text-gray-500"> </td><td class="px-6 py-4 text-right"><button class="font-medium text-indigo-600 hover:text-indigo-900 mr-4 transition-all duration-300 ease-in-out cursor-pointer">Editar</button> <button class="font-medium text-red-600 hover:text-red-900 transition-all duration-300 ease-in-out cursor-pointer">Eliminar</button></td></tr>'),De=h('<div class="overflow-x-auto"><table class="min-w-full text-sm text-left text-gray-700"><thead class="bg-gray-50 text-xs text-gray-500 uppercase"><tr><th scope="col" class="px-6 py-3">Descripción</th><th scope="col" class="px-6 py-3">Categoría</th><th scope="col" class="px-6 py-3">Monto</th><th scope="col" class="px-6 py-3">Fecha</th><th scope="col" class="px-6 py-3 text-right">Acciones</th></tr></thead><tbody></tbody></table></div> <div class="flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6"><div class="flex flex-1 justify-between sm:hidden"><button class="relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 transition-colors duration-300 ease-in-out cursor-pointer">Anterior</button> <button class="relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 transition-colors duration-300 ease-in-out cursor-pointer">Siguiente</button></div> <div class="hidden sm:flex sm:flex-1 sm:items-center sm:justify-between"><div><p class="text-sm text-gray-700">Página <span class="font-medium"> </span> de <span class="font-medium"> </span></p></div> <div><nav class="isolate inline-flex -space-x-px rounded-md shadow-sm" aria-label="Pagination"><button class="relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50 transition-colors duration-300 ease-in-out cursor-pointer"><span class="sr-only">Anterior</span> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M15 6l-6 6l6 6"></path></svg></button> <button class="relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50 transition-colors duration-300 ease-in-out cursor-pointer"><span class="sr-only">Siguiente</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 icon icon-tabler icons-tabler-outline icon-tabler-chevron-right"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M9 6l6 6l-6 6"></path></svg></button></nav></div></div></div>',1),Pe=h('<p class="px-6 py-10 text-center text-gray-500">No hay gastos registrados. ¡Añade uno para empezar!</p>'),Ce=h('<!> <div class="container mx-auto p-4 sm:p-6 lg:p-8"><h2 class="text-xl font-bold text-gray-800 mb-4">Lista de Gastos</h2> <div class="bg-white shadow-lg rounded-lg overflow-hidden"><!></div></div>',1);function $e(it,z){Yt(z,!1);const[V,lt]=oe(),d=()=>Tt(wt,"$currentPage",V),r=()=>Tt(ge,"$paginatedExpenses",V);let v=T(null),y=T(""),M=T(""),O=T(""),b=T(""),f=T(!1),m=null;const W=["Ocio","Comida/Bebida","Hogar","Gastos Personales","Otros"];function B(o){const c=new Date(o),H=c.getFullYear(),L=("0"+(c.getMonth()+1)).slice(-2),gt=("0"+c.getDate()).slice(-2);return`${H}-${L}-${gt}`}const X=o=>{m=o,n(f,!0)},dt=async()=>{if(n(f,!1),m)try{await pe(Ht(Lt,"gastos",m)),nt("Gasto eliminado correctamente","success")}catch(o){console.error("Error removing document: ",o),nt("Error al eliminar el gasto","error")}finally{m=null}},Z=()=>{n(f,!1),m=null},tt=o=>{n(v,o),n(y,o.descripcion),n(M,o.monto),n(O,B(o.fecha)),n(b,o.categoria||"Otros")},ct=()=>{n(v,null)},ut=async()=>{try{const o=Ht(Lt,"gastos",a(v).id),c=new Date(a(O)),H=c.getTimezoneOffset()*6e4,L=new Date(c.getTime()+H);await ve(o,{descripcion:a(y),monto:parseFloat(a(M)),fecha:L,categoria:a(b)}),n(v,null),nt("Gasto actualizado correctamente","success")}catch(o){console.error("Error updating document: ",o),nt("Error al actualizar el gasto","error")}};function Jt(o){return new Date(o).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})}se(()=>(d(),r(),wt),()=>{d()>r().totalPages&&wt.set(r().totalPages||1)}),ne(),It();var kt=Ce(),Et=C(kt);he(Et,{message:"¿Estás seguro de que quieres eliminar este gasto? Esta acción no se puede deshacer.",get isOpen(){return a(f)},set isOpen(o){n(f,o)},$$events:{confirm:dt,cancel:Z},$$legacy:!0});var Dt=s(Et,2),Pt=s(e(Dt),2),Kt=e(Pt);{var Qt=o=>{var c=ye();l(o,c)},Ut=o=>{var c=U(),H=C(c);{var L=j=>{var A=_e(),pt=e(A,!0);t(A),q(()=>x(pt,(r(),i(()=>r().error)))),l(j,A)},gt=j=>{var A=U(),pt=C(A);{var Vt=F=>{var N=De(),I=C(N),et=e(I),G=s(e(et));$t(G,5,()=>(r(),i(()=>r().paginatedData)),_=>_.id,(_,u)=>{var Gt=U(),te=C(Gt);{var ee=S=>{var w=ke(),k=e(w),rt=e(k);yt(rt),t(k);var E=s(k),R=e(E);q(()=>{a(b),ie(()=>{})}),$t(R,5,()=>W,de,(p,K)=>{var Q=we(),re=e(Q,!0);t(Q);var St={};q(()=>{x(re,a(K)),St!==(St=a(K))&&(Q.value=(Q.__value=a(K))??"")}),l(p,Q)}),t(R),t(E);var D=s(E),ot=e(D);yt(ot),t(D);var P=s(D),st=e(P);yt(st),t(P);var Y=s(P),J=e(Y),ht=s(J,2);t(Y),t(w),_t(rt,()=>a(y),p=>n(y,p)),ce(R,()=>a(b),p=>n(b,p)),_t(ot,()=>a(M),p=>n(M,p)),_t(st,()=>a(O),p=>n(O,p)),g("click",J,ut),g("click",ht,ct),l(S,w)},ae=S=>{var w=Ee(),k=e(w),rt=e(k,!0);t(k);var E=s(k),R=e(E,!0);t(E);var D=s(E),ot=e(D);t(D);var P=s(D),st=e(P,!0);t(P);var Y=s(P),J=e(Y),ht=s(J,2);t(Y),t(w),q((p,K)=>{x(rt,(a(u),i(()=>a(u).descripcion))),x(R,(a(u),i(()=>a(u).categoria||"N/A"))),x(ot,`$${p??""}`),x(st,K)},[()=>(a(u),i(()=>a(u).monto.toFixed(2))),()=>(a(u),i(()=>Jt(a(u).fecha)))]),g("click",J,()=>tt(a(u))),g("click",ht,()=>X(a(u).id)),l(S,w)};$(te,S=>{a(v),a(u),i(()=>a(v)&&a(v).id===a(u).id)?S(ee):S(ae,!1)})}l(_,Gt)}),t(G),t(et),t(I);var at=s(I,2),vt=e(at),ft=e(vt),Ct=s(ft,2);t(vt);var zt=s(vt,2),mt=e(zt),Mt=e(mt),bt=s(e(Mt)),Xt=e(bt,!0);t(bt);var Ot=s(bt,2),Zt=e(Ot,!0);t(Ot),t(Mt),t(mt);var jt=s(mt,2),At=e(jt),xt=e(At),Ft=s(xt,2);t(At),t(jt),t(zt),t(at),q(()=>{ft.disabled=d()===1,Ct.disabled=(d(),r(),i(()=>d()===r().totalPages)),x(Xt,d()),x(Zt,(r(),i(()=>r().totalPages))),xt.disabled=d()===1,Ft.disabled=(d(),r(),i(()=>d()===r().totalPages))}),g("click",ft,function(..._){qt?.apply(this,_)}),g("click",Ct,()=>Bt(r().totalPages)),g("click",xt,function(..._){qt?.apply(this,_)}),g("click",Ft,()=>Bt(r().totalPages)),l(F,N)},Wt=F=>{var N=U(),I=C(N);{var et=G=>{var at=Pe();l(G,at)};$(I,G=>{r(),i(()=>!r().loading)&&G(et)},!0)}l(F,N)};$(pt,F=>{r(),i(()=>r().paginatedData&&r().paginatedData.length>0)?F(Vt):F(Wt,!1)},!0)}l(j,A)};$(H,j=>{r(),i(()=>r().error)?j(L):j(gt,!1)},!0)}l(o,c)};$(Kt,o=>{r(),i(()=>r().loading)?o(Qt):o(Ut,!1)})}t(Pt),t(Dt),l(it,kt),Rt(),lt()}export{$e as default};
