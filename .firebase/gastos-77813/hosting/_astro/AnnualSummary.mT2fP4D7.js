import{i as k,a as B,s as S,b as $}from"./store.CUww-eZX.js";import{o as w,a as D,y as N}from"./expenseStore.B72t6hGa.js";import{l as R,e as j,f as u,a as c,p as I,b as L,g as e,m,s as M,c as v,u as T,r as y,h as d,d as g}from"./template.CsvUa5oO.js";import{C as p,r as U,b as W}from"./chart.zX7s5j_d.js";import"./firebase.C6L9Uwjb.js";var Z=u("<canvas></canvas>"),q=u('<div class="absolute inset-0 flex items-center justify-center"><p class="text-center text-gray-500">No hay datos para mostrar en el gr√°fico anual.</p></div>'),z=u('<div class="bg-white shadow-lg rounded-lg p-4"><h2 class="text-xl font-bold text-gray-800 mb-4">Resumen Anual</h2> <div class="relative h-64"><!></div></div>');function P(h,_){L(_,!1);const[F,C]=S(),t=()=>$(N,"$yearlyExpenses",F);let o=m(),a=m(null);const f=["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#C9CBCF","#7A8E9A","#F7464A","#46BFBD"];w(()=>{p.register(...U)}),D(()=>{e(a)&&e(a).destroy()}),R(()=>(t(),e(o),e(a),p),()=>{if(t().length>0&&e(o)){const r=t().map(s=>s.year),l=t().map(s=>s.total);e(a)?(d(a,e(a).data.labels=r),d(a,e(a).data.datasets[0].data=l),d(a,e(a).data.datasets[0].backgroundColor=f.slice(0,t().length)),e(a).update()):g(a,new p(e(o),{type:"bar",data:{labels:r,datasets:[{label:" Total Anual",data:l,backgroundColor:f.slice(0,t().length),borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{callback(s){return"$"+s.toLocaleString("es-ES")}}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label(s){let n=s.dataset.label||"";return n&&(n+=": "),s.parsed.y!==null&&(n+=new Intl.NumberFormat("es-ES",{style:"currency",currency:"USD"}).format(s.parsed.y)),n}}}}}}))}}),j(),k();var i=z(),b=M(v(i),2),A=v(b);{var x=r=>{var l=Z();W(l,s=>g(o,s),()=>e(o)),c(r,l)},E=r=>{var l=q();c(r,l)};B(A,r=>{t(),T(()=>t()&&t().length>0)?r(x):r(E,!1)})}y(b),y(i),c(h,i),I(),C()}export{P as default};
