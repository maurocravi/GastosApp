import{h as i,l as p,j as v,u as h,k as E,n as P}from"./template.DDEeykWN.js";import{d as C,w as m}from"./index.xVMkLsqj.js";import{q as D,o as x,c as F,b as y,d as T}from"./firebase.DqkX-9P5.js";function j(t){i===null&&p(),v&&i.l!==null?k(i).m.push(t):h(()=>{const e=P(t);if(typeof e=="function")return e})}function B(t,e,{bubbles:o=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:o,cancelable:n})}function z(){const t=i;return t===null&&p(),(e,o,n)=>{const a=t.s.$$events?.[e];if(a){const s=E(a)?a.slice():[a],r=B(e,o,n);for(const c of s)c.call(t.x,r);return!r.defaultPrevented}return!0}}function k(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const g={Ocio:"#FF6384","Comida/Bebida":"#36A2EB",Hogar:"#FFCE56","Gastos Personales":"#4BC0C0",Otros:"#9966FF",Default:"#C9CBCF"},w=()=>{const{subscribe:t,set:e,update:o}=m({loading:!0,data:[],error:null}),n=D(F(T,"gastos"),x("fecha","desc")),a=y(n,s=>{const r=s.docs.map(c=>{const l=c.data(),f=l.fecha.toDate(),_=f.getTimezoneOffset()*6e4,b=new Date(f.getTime()+_);return{id:c.id,...l,fecha:b,color:g[l.categoria]||g.Default}});e({loading:!1,data:r,error:null})},s=>{console.error("Error fetching expenses: ",s),e({loading:!1,data:[],error:"No se pudieron cargar los gastos."})});return{subscribe:t,update:o,unsubscribe:a}},I=w(),u=10,d=m(1),A=C([I,d],([t,e])=>{if(t.loading)return{loading:!0,paginatedData:[],totalPages:1};if(t.error)return{error:t.error,paginatedData:[],totalPages:1};const o=t.data.length,n=Math.ceil(o/u)||1,a=(e-1)*u,s=a+u,r=t.data.slice(a,s);return{...t,paginatedData:r,totalPages:n}});function G(t){d.update(e=>e<t?e+1:e)}function H(){d.update(t=>t>1?t-1:1)}export{d as a,H as b,z as c,I as e,G as n,j as o,A as p};
